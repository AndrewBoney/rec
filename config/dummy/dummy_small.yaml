dataset:
  name: dummy
  paths:
    users: data/dummy/prepared/users.parquet
    items: data/dummy/prepared/items.parquet
    interactions_train: data/dummy/prepared/interactions_train.parquet
    interactions_val: data/dummy/prepared/interactions_val.parquet

shared:
  seed: 42
  encoder_cache: encoders.json

retrieval:
  columns:
    user_id: user_id
    item_id: item_id
    user_cat_cols:
      - user_group
      - region
      - age_group
    item_cat_cols:
      - category
      - price_band
      - style
    interaction_user_col: user_id
    interaction_item_col: item_id
    interaction_time_col: timestamp
    label_col: null
  model:
    model_arch: two_tower
    embedding_dim: 64
    hidden_dims:
      - 128
      - 64
    dropout: 0.1
  training:
    batch_size: 1024
    num_workers: 0
    max_epochs: 3
    lr: 0.001
    optimizer: Adam  # Simple string form
    temperature: 0.05
    eval_steps: 200
    log_steps: 50
    artifact_dir: artifacts/retrieval
    use_wandb: true
    wandb_project: rec
    wandb_entity: null
    wandb_run_name: retrieval-dummy-small
    checkpoint: retrieval.ckpt

ranking:
  columns:
    user_id: user_id
    item_id: item_id
    user_cat_cols:
      - user_group
      - region
      - age_group
    item_cat_cols:
      - category
      - price_band
      - style
    interaction_user_col: user_id
    interaction_item_col: item_id
    interaction_time_col: timestamp
  model:
    model_arch: two_tower
    embedding_dim: 64
    hidden_dims:
      - 128
      - 64
    scorer_hidden_dims:
      - 128
      - 64
    dropout: 0.1
  training:
    batch_size: 4096
    num_workers: 0
    max_epochs: 3
    lr: 0.001
    optimizer: AdamW
    negatives_per_pos: 4
    eval_steps: 200
    log_steps: 50
    artifact_dir: artifacts/ranking
    use_wandb: true
    wandb_project: rec
    wandb_entity: null
    wandb_run_name: ranking-dummy-small
    checkpoint: ranking.ckpt
